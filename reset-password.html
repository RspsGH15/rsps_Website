<!doctype html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Reset Password</title></head>
<body style="font-family:system-ui;margin:2rem">
  <h1>Reset Password</h1>
  <p>Enter a new password:</p>
  <input id="pwd" type="password" placeholder="New password" />
  <button id="go">Update</button>
  <div id="msg" style="margin-top:10px;color:#ef4444"></div>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script>
    const sb = supabase.createClient(
      "https://eqbbddsjutlupckqzlpq.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVxYmJkZHNqdXRsdXBja3F6bHBxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2NDkzOTMsImV4cCI6MjA3MDIyNTM5M30.CVmsiBCCp98ZQQOEe-1QgrvcJGeRP4DGHUx6j0wPCRI"
    );

    document.getElementById('go').onclick = async () => {
      const password = document.getElementById('pwd').value;
      const { data: { user }, error: sErr } = await sb.auth.getUser();
      if (sErr || !user) { document.getElementById('msg').textContent = "Session missing. Open the link from the email again."; return; }
      const { error } = await sb.auth.updateUser({ password });
      document.getElementById('msg').style.color = error ? '#ef4444' : '#10b981';
      document.getElementById('msg').textContent = error ? error.message : 'Password updated. You can close this tab and log in.';
    };
  </script>
</body></html>
